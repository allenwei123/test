<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>canvas切图</title>
</head>

<body>
    <img src="a.jpg" id="img" alt="">
    <canvas id="canvas" width="600" height="450" style="border:1px solid black;"></canvas>
    <img src="" id="img1" alt="">
    <button id="btn">click</button>
</body>
<script>
    function draw() {
        var canvas = document.getElementById('canvas');
        if (!canvas.getContext) return;
        var ctx = canvas.getContext("2d");
        var img = new Image();   // 创建img元素
        // file.crossOrigin = "Anonymous";
        img.onload = function () {
            console.log('width:',img.width,",height:",img.height);
            var scale = img.width / img.height;
            var jtw =50; 
            var jth = 50;
            ctx.drawImage(img, 60, 40, jtw , jth , img.width+30, 40, jtw , jth );
            // ctx.drawImage(img, 100, 100, img.width , img.height);
            btn.onclick = function() {
                var url1 = canvas.toDataURL("image/jpeg");
                document.getElementById('img1').src = url1;
            }
        }
        // file.src = 'https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=810502872,1054013888&fm=27&gp=0.jpg';
        img.src = 'a.jpg';
    }

    draw();


</script>

</html>